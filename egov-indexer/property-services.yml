ServiceMaps:
 serviceName: Property Tax - rainmaker
 version: 1.0.0
 mappings:
  - topic: save-property-registry
    configKey: INDEX
    indexes:
      - name: property-services
        type: general
        id: $.propertyId,$.tenantId,$.auditDetails.lastModifiedTime
        jsonPath: $.Property
        timeStampField: $.auditDetails.lastModifiedTime


  - topic: update-property-registry
    configKey: INDEX
    indexes:
      - name: property-services
        type: general
        id: $.propertyId,$.tenantId,$.auditDetails.lastModifiedTime
        jsonPath: $.Property
        timeStampField: $.auditDetails.lastModifiedTime
        
  - topic: cancel-property-registry
    configKey: INDEX
    indexes:
      - name: property-services
        type: general
        id: $.propertyId,$.tenantId,$.auditDetails.lastModifiedTime
        jsonPath: $.Property
        timeStampField: $.auditDetails.lastModifiedTime   
        
  - topic: property-registry-legacyIndex
    configKey: LEGACYINDEX
    indexes:
      - name: property-services
        type: general
        isBulk: true
        id: $.propertyId,$.tenantId,$.auditDetails.lastModifiedTime
        jsonPath: $.Properties.*
        timeStampField: $.auditDetails.lastModifiedTime        
        
  - topic: save-pt-assessment
    configKey: INDEX
    indexes:
      - name: property-assessments
        type: general
        id: $.assessmentNumber, $.tenantId
        jsonPath: $.Assessment
        timeStampField: $.auditDetails.createdTime


  - topic: update-pt-assessment
    configKey: INDEX
    indexes:
      - name: property-assessments
        type: general
        id: $.assessmentNumber, $.tenantId
        jsonPath: $.Assessment
        timeStampField: $.auditDetails.createdTime
        
  - topic: cancel-property-assessment
    configKey: INDEX
    indexes:
      - name: property-assessments
        type: general
        id: $.assessmentNumber, $.tenantId
        jsonPath: $.Assessment
        timeStampField: $.auditDetails.createdTime 
 
  - topic: pt-assessment-legacyIndex
    configKey: LEGACYINDEX
    indexes:
      - name: property-assessments
        type: general
        id: $.assessmentNumber, $.tenantId
        jsonPath: $.Assessments.*
        isBulk: true
        timeStampField: $.auditDetails.createdTime   
