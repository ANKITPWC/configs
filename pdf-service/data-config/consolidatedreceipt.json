{
  "key": "consolidatedreceipt",
  "DataConfigs": {
    "serviceName": "rainmaker-common",
    "version": "1.0.0",
    "baseKeyPath": "$.Payments.*",
    "entityIdPath":"$.paymentDetails[0].receiptNumber",
    "isCommonTableBorderRequired": true,
    "mappings": [
      {
        "topic": "common-pdf-generation-3",
        "mappings": [
          {
            "direct": [
              {
                "variable": "payerName", 
                "value": {
                  "path": "$.payerName"
                }
              },
              {
                "variable": "user-name", 
                "value": {
                  "path": "$.userInfo.name"
                },
                "type":"selectFromRequestInfo"  
              },
              {
                "variable": "payerContact", 
                "value": {
                  "path": "$.mobileNumber"
                }
              },
              {
                "variable": "receiptNo", 
                "value": {
                  "path": "$.paymentDetails[0].receiptNumber"
                }
              },
              {
                "variable": "serviceType", 
                "value": {
                  "path": "$.paymentDetails[0].businessService"
                },
                "localisation":{
                  "required":true,
                  "prefix":"MODULE",   
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "paidAmount", 
                "value": {
                  "path": "$.paymentDetails[0].totalAmountPaid"
                }
              },
              {
                "variable": "fromPeriod", 
                "value": {
                  "path": "$.paymentDetails[0].bill.billDetails[0].fromPeriod"
                }
              },
              {
                "variable": "toPeriod", 
                "value": {
                  "path": "$.paymentDetails[0].bill.billDetails[0].toPeriod"
                }
              },
              {
                "variable": "paymentMode", 
                "value": {
                  "path": "$.paymentMode"
                }
              },
              {
                "variable": "G8ReceiptNo",
                "value": {
                  "path": "$.paymentDetails[0].bill.billDetails[0].manualReceiptNumber"
                }
              },
              {
                "variable": "G8ReceiptDate",
                "value": {
                  "path": "$.paymentDetails[0].bill.billDetails[0].manualReceiptDate"
                }
              },
              {
                "variable": "paymentDate", 
                "value": {
                  "path": "$.transactionDate"
                }
              },
              {
                "variable": "consumerID", 
                "value": {
                  "path": "$.paymentDetails[0].bill.consumerCode"
                }
              },
              {
                "variable": "transactionID", 
                "value": {
                  "path": "$.transactionNumber"
                }
              },
              {
                "variable": "dueAmount", 
                "value": {
                  "path": "$.paymentDetails[0].totalDue"
                }
              },
	           {
                "variable": "logoImage",                        
                "url":"https://raw.githubusercontent.com/egovernments/egov-web-app/master/web/rainmaker/dev-packages/egov-ui-kit-dev/src/assets/images/pblogo.png",
                "type":"image"      
              },
              {
                "variable": "amc",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "payment_receipt",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "receipt_no",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "consumer_id",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "payment_date",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "payer_name",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "payer_contact",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "service_type",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "billing_period",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "paid_amount",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "pending_amount",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "payment_mode",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "transaction_id",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "g8_receipt_no",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "g8_receipt_date",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "generated_by",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "commissioner/eO",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "no_signature",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "disclamer",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "disclamer_1",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "disclamer_2",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "disclamer_3",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "disclamer_4",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "disclamer_5",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              },
              {
                "variable": "to",
                "value": {
                  "path": "localisation-code"
                },
                "type": "label",
                "localisation":{
                  "required":true,
                  "prefix": null,
                  "module":"rainmaker-common"
               }
              }
            ]
          },
          {
            "derived": [
               {
                  "variable": "pendingAmount",
                  "formula": "{{dueAmount}}-{{paidAmount}}"
               }
            ]
         },
          {
            "externalAPI": [     
              { 
                  "path": "http://egov-mdms-service:8080/egov-mdms-service/v1/_get",
                  "queryParam": "moduleName=tenant&masterName=tenants&tenantId=pb&filter=%5B?(@.code=='$.tenantId')%5D",
                  "apiRequest": null,
                  "responseMapping":[
                    {             
                      "variable":"address",
                      "value":"$.MdmsRes.tenant.tenants[0].address"
                    },
                    {
                      "variable":"phoneNumber",
                      "value":"$.MdmsRes.tenant.tenants[0].contactNumber"
                    },
                    {
                      "variable":"website",
                      "value":"$.MdmsRes.tenant.tenants[0].domainUrl"
                    },
                    {
                      "variable":"email",
                      "value":"$.MdmsRes.tenant.tenants[0].emailId"
                    }
                  ]
              }
            ]
          }
        ]
      }
    ]
  }
}